
<head>
    <title>Constants and std Algorithms</title>

</head>

<body>
  <a href="https://uwelukechild.github.io/uweLukeChild">Back to homepage</a>

<h1 id="constants-and-algorithms-ii">Constants and Algorithms II</h1>
<p>This tutorial is broken into two different parts. The first looks at sonstants, defines and enums. The second explores a few more algorithims that can be applied specifically to arrays and other data containers.</p>
<h1 id="part-1-constants-defines-and-enums-">Part 1: Constants, defines and enums:</h1>
<p>So far we have either used variables or literals to represent data. However, there are many occasions where we might to define a constant value, in essence a variable whose value cannot be updated or changed. We will explore 3 topics in this exercise:</p>
<ol>
<li>Consants</li>
<li>Defines</li>
<li>enums</li>
</ol>
<h1 id="constants">Constants</h1>
<p>In previous exercises we have written code that looks like the following:</p>
<pre><code class="lang-cpp">  <span class="hljs-type">float</span> freq = <span class="hljs-number">440.0</span> * pow(<span class="hljs-number">2.0</span>, (note - <span class="hljs-number">69.0</span>)/ <span class="hljs-number">12.0</span>);
  aserveOscillator(<span class="hljs-number">0</span>, freq, <span class="hljs-number">1.0</span>, <span class="hljs-number">0</span>);
</code></pre>
<p>In this situation the variable freq is set once and following on from this its value never gets updated. This is a perfect occasion for making the freq variable a constant.</p>
<pre><code class="lang-cpp">  const <span class="hljs-type">float</span> freq = <span class="hljs-number">440.0</span> * pow(<span class="hljs-number">2.0</span>, (note - <span class="hljs-number">69.0</span>)/ <span class="hljs-number">12.0</span>);
</code></pre>
<p>The const keyword can be placed in front of any variable and means that after the variables value has been set it can no longer be updated, and is read only.</p>
<pre><code class="lang-cpp">  const <span class="hljs-type">float</span> concertPitch = <span class="hljs-number">440.0</span>;
  concertPitch = <span class="hljs-number">443.0</span>; <span class="hljs-comment">//will produce a compiler error!</span>
</code></pre>
<p>Using consts can also make your program more readable. For example, when checking for CC’s we often simply state the number of the CC as a literal.</p>
<pre><code class="lang-cpp">  <span class="hljs-keyword">if</span> <span class="hljs-comment">(cc == 115)</span> {
</code></pre>
<p>Instead using constants, we get the following:</p>
<pre><code class="lang-cpp">  <span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> playBtn = <span class="hljs-number">115</span>;

  <span class="hljs-keyword">if</span> (cc == playBtn) { <span class="hljs-comment">//easier to read</span>
</code></pre>
<p>Constants are often placed either at the top of our program between the includes and run function. <strong>This is one of the few times variables should be declared here</strong>. They are often also placed inside class&#39;s as member variables.</p>
<h2 id="defines">Defines</h2>
<p>Defines can also be used to define constant values. The general form of a define is:</p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SYMBOL value</span>
</code></pre>
<p>For example, in this instance, the symbol COLUMNS holds the value 16.</p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> COLUMNS 16</span>
</code></pre>
<p>And can be used for doing the following (shown below) In essence a define is a find and replace, whereby the compiler will actually swap each occurrence of COLUMNS for the value 16. Like const, define is a method for making code more readable</p>
<pre><code class="lang-cpp"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++) {

<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; COLUMNS; i++) {
</code></pre>
<p>A define is generally not recommended for defining constant values, and you are encouraged to use const instead. Define can however do things that const cannot, for example:</p>
<pre><code class="lang-cpp"><span class="hljs-meta">#<span class="hljs-meta-keyword">define</span> SLEEP_500 aserveSleep(500);</span>
</code></pre>
<p>Therefore, anytime you want to sleep for 500ms you can write SLEEP_500.</p>
<pre><code class="lang-cpp">SLEEP_500
</code></pre>
<p>It is worth knowing about define for the purposes of learning the C++ language however it has limited use for this course. Define can solve some very tricky programming problems, but is also frequently abused!</p>
<h2 id="enum">Enum</h2>
<p>The last type of programming construct you an use for defining constants, is an enum. An enum is shorting for enumeration and allows a series of constant symbols to be defined in a series, whereby each enums value is +1 of the previous value. We could use an enum structure for defining each wave types numerical value.</p>
<pre><code class="lang-cpp">    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">eWaveTypes</span> {</span>
        eSine = <span class="hljs-number">0</span>,
        eSquare, <span class="hljs-regexp">//will</span> have the value <span class="hljs-number">1</span>
        eSaw,
        eReverseSaw,
        eTri,
        eNoise /<span class="hljs-regexp">/will have the value 5
    };</span>
</code></pre>
<p>Be default the enums first entry will be given the value 0, however you should always specify a value even if it is still 0. The value of eSquare will be 1, eSaw will be 2 and so on.</p>
<p>Now when we wish to turn on an oscillator we can write the following:</p>
<pre><code class="lang-cpp">aserveOscillator(<span class="hljs-number">0</span>, <span class="hljs-number">440.0</span>, <span class="hljs-number">1.0</span>, eSine);
</code></pre>
<p>Which is more readable than:</p>
<pre><code class="lang-cpp">aserveOscillator(<span class="hljs-number">0</span>, <span class="hljs-number">440.0</span>, <span class="hljs-number">1.0</span>, <span class="hljs-number">0</span>);
</code></pre>
<p>The general form of an enum is as follows:</p>
<pre><code><span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">name</span> {</span>
  entry0 = <span class="hljs-number">0</span>,
  entry1
};
</code></pre><p>Each entry should be separated by a comma, and the statement should end with a brace and semicolon. enums should be placed in inside a class. By convention enums should start with a lowercase <strong>e</strong>.</p>
<p>You can also group constants in an enum that are not necessarily sequential, but you must define the value of each.</p>
<pre><code class="lang-cpp">    <span class="hljs-class"><span class="hljs-keyword">enum</span> <span class="hljs-title">eControls</span> {</span>
        eKnob1 = <span class="hljs-number">21</span>,
        eSlider1 = <span class="hljs-number">41</span>,
        ePlayBtn = <span class="hljs-number">115</span>,
    };
</code></pre>
<h2 id="enums-as-types">Enums as types</h2>
<p>An enum can also be used as a variable data type.</p>
<pre><code class="lang-cpp">eWaveTypes waveType<span class="hljs-comment">;</span>
</code></pre>
<p>However, be aware than you can only assign values to waveType that were specified in the eWaveType enum.</p>
<pre><code class="lang-cpp">    waveType = eSaw; <span class="hljs-comment">//is fine</span>
    waveType = <span class="hljs-number">2</span>; <span class="hljs-comment">//compiler warning</span>
</code></pre>
<p><em>Note that it is possible to assign integer values directly to an enum type (see below) but is mostly discouraged</em></p>
<pre><code class="lang-cpp">  eWaveTypes waveType;
  <span class="hljs-keyword">int</span> waveInt = <span class="hljs-number">3</span>;

   waveType = <span class="hljs-keyword">static_cast</span>&lt;eWaveTypes&gt;(waveInt);
</code></pre>
<h2 id="exercise-1-code-refactoring">Exercise 1: Code refactoring</h2>
<p>Download the supplied files <a href="../../Code%20Exercises/Extra%20Tutorial/enums">Tutorial 13 enums</a> and copy them into your project. You will be refactoring this project to make use of the topics we discussed in this handout. </p>
<ol>
<li>You should make any variables const that are not going to be modified after being initiliased</li>
<li>Replace any arbitrary literals with constants
a.    Note that values within calculations are fine as they are.</li>
<li>Make use of at least one enum</li>
<li>Ensure you save your solution to codebook</li>
<li>Remember to check your solution with one of the lecturers during next week’s tutorial</li>
</ol>
<h1 id="part-2-array-vector-algorithms-">Part 2 Array/Vector Algorithms:</h1>
<p>There are a number of functions built into the standard C++ Library (std) that are powerful tools for performing operations on arrays and vectors. In this exercise we will look at and explore a number of these including:</p>
<ol>
<li>Passing arrays/vectors as function arguments</li>
<li>Finding items within an array/vector</li>
<li>Sorting array/vector</li>
<li>Reversing array/vector</li>
<li>Randomising array/vector</li>
</ol>
<h2 id="passing-arrays-vectors-to-functions">Passing arrays &amp; vectors to functions</h2>
<p>Arrays can be passed to functions just like normal variables, however it is difficult to do this effectively as you need to specify the size of the array as the argument.</p>
<pre><code class="lang-cpp">  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printArray</span> <span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">array</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-number">4</span>&gt; <span class="hljs-built_in">array</span>)</span></span>;
</code></pre>
<p>Meaning that if we wanted to pass an array with 6 elements we would have to create another function just for this (and for each subsequent array size)</p>
<pre><code class="lang-cpp">  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printArray</span> <span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">array</span>&lt;<span class="hljs-keyword">int</span>, <span class="hljs-number">6</span>&gt; <span class="hljs-built_in">array</span>)</span></span>;
</code></pre>
<p>As you might imagine this is cumbersome and inefficient. Instead if we replace the argument with a vector instead of an array, we can pass in a vector of any size:</p>
<pre><code class="lang-cpp">  <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">printVector</span> <span class="hljs-params">(<span class="hljs-built_in">std</span>::<span class="hljs-built_in">vector</span>&lt;<span class="hljs-keyword">int</span>&gt; <span class="hljs-built_in">vector</span>)</span></span>;
</code></pre>
<p>Note this function will only work with integer vectors.</p>
<h2 id="exercise-2-">Exercise 2:</h2>
<p>Add the <strong>printVector</strong> function declaration shown above to your IAP.h file. Once you have done this complete the function definition inside IAP.cpp, the function should use a loop to iterate over each element of the vector and print the value stored at that index. Write suitable code in your run() function to test the printVector function. <strong>Note you should not use shared variables for this exercise.</strong></p>
<h2 id="finding-items">Finding items</h2>
<p>As arrays can hold a large number of variables if very common to search through and find the position (index) of them. Study the following code.</p>
<p><img src="../images/finding.png" /></p>
<p>This code shown above is a common routine for searching through an array. Firstly, we create a for loop for iterating over each element of the array, we then check each array element for the value we are looking for, which in this case is 16. If this value is found, we then set the indexOfValueToLookFor variable to be the index that holds 16. We can then call break to exit the loop. In this example we use -1 to symbolise that the value requested was not found.</p>
<h2 id="exercise-3-">Exercise 3:</h2>
<p>Adapt the code supplied above to write a generalized find Index function. This function should take a <strong>vector</strong> as its argument and a <strong>value</strong> to look for. It should return an int which corresponds to the index of the value (if it contains it), or a -1 value if it does not. <strong>Note you should not use shared variables for this exercise.</strong></p>
<p>We have supplied a template program which you can download from the following link.</p>
<p><a href="../../Code%20Exercises/Extra%20Tutorial/sorting/find%20function%20unit%20test.txt">Tutorial 13 test text file</a> </p>
<p>You should copy-paste the template program into your IAP::run() and write your own your findIndex function. 
<strong>Note that this is a different test file to the one required for unit test 10</strong>.</p>
<h2 id="sorting">Sorting</h2>
<p>There are a number of algorithms for sorting the elements of an array into acceding order. At this stage of the course we will use the inbuilt sorting methods found in the <strong>std library</strong>, however we will implement our own rudimentary sorting algorithm towards the end of this course.</p>
<p>To sort an array we can simply use the std::sort function.</p>
<pre><code class="lang-cpp">  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">array</span>&lt;<span class="hljs-keyword">int</span>, 10&gt; <span class="hljs-built_in">array</span>;

  <span class="hljs-comment">//... add elements to array</span>

  <span class="hljs-built_in">std</span>::sort(<span class="hljs-built_in">array</span>.begin(), <span class="hljs-built_in">array</span>.end());
</code></pre>
<p>The std::sort function takes two arguments called <strong>iterators</strong> one for specifying where we would like to start sorting from and another to specify where we would like to stop sorting. As we want to sort the entire array we can use the <strong>begin</strong> and <strong>end</strong> member functions. We will cover <strong>iterators</strong> in detail towards the end of this module, for now we can simply use them without worrying too much about them.</p>
<h2 id="reversing">Reversing</h2>
<p>There are a few occasions where we might want to reverse the contents of an array. For example, playing a sequence of notes backwards or reversing the sorted order of a list. For this we can use the std::reverse function.</p>
<pre><code class="lang-cpp">  std::<span class="hljs-keyword">reverse</span>(<span class="hljs-keyword">array</span>.<span class="hljs-keyword">begin</span>(), <span class="hljs-keyword">array</span>.<span class="hljs-keyword">end</span>());
</code></pre>
<p>The syntax for this should look very similar to std::sort</p>
<h2 id="randomize">Randomize</h2>
<p>Another useful function that you may wish to use from time to time is std::random_shuffle</p>
<pre><code class="lang-cpp">  std::random_shuffle(<span class="hljs-keyword">array</span>.<span class="hljs-keyword">begin</span>(), <span class="hljs-keyword">array</span>.<span class="hljs-keyword">end</span>());
</code></pre>
<p>You can use this to shuffle or randomize the order of the elements within an array.</p>
<p><strong>Note that all of the above functions can be applied to both arrays and vectors.</strong></p>
<h2 id="exercise-4-sort-reverse-randomize">Exercise 4: Sort, Reverse, Randomize</h2>
<p>To conclude this tutorial, you should try out each of the 3 functions discussed previously. A placeholder for this exercise can be found here <a href="../../Code%20Exercises/Extra%20Tutorial/sorting/getting%20started.txt">Tutorial 13 sorting getting started</a>.</p>

<a href="https://uwelukechild.github.io/uweLukeChild">Back to homepage</a>
</body>
